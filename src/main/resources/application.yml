server:
  port: ${SERVER_PORT:8080}
  servlet:
    session:
      timeout: 30m

spring:
  application:
    name: K2SO Watcher

  datasource:
    url: jdbc:h2:file:${DB_PATH:./data/k2so_watcher};DB_CLOSE_DELAY=-1;DB_CLOSE_ON_EXIT=FALSE
    driver-class-name: org.h2.Driver
    username: ${DB_USERNAME:k2so}
    password: ${DB_PASSWORD:k2so_secure_password}

  jpa:
    database-platform: org.hibernate.dialect.H2Dialect
    hibernate:
      ddl-auto: update
    show-sql: false
    defer-datasource-initialization: true
    properties:
      hibernate:
        format_sql: true

  sql:
    init:
      mode: always

  h2:
    console:
      enabled: ${H2_CONSOLE_ENABLED:false}
      path: /h2-console
      settings:
        web-allow-others: false

  thymeleaf:
    cache: false
    prefix: classpath:/templates/
    suffix: .html
    mode: HTML
    encoding: UTF-8

  security:
    user:
      name: admin
      password: admin

logging:
  level:
    root: INFO
    com.k2so.watcher: DEBUG
    org.springframework.security: INFO
  pattern:
    console: "%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger{36} - %msg%n"

# K2SO Watcher Configuration
k2so:
  network:
    # Network range to scan (CIDR notation)
    scan-range: ${NETWORK_SCAN_RANGE:10.40.30.0/24}
    # Scanner tool preference: arp-scan, nmap, ping
    scanner-tool: ${SCANNER_TOOL:arp-scan}
    # Scan timeout in seconds
    scan-timeout: ${SCAN_TIMEOUT:120}

  scheduler:
    # Enable scheduled scans
    enabled: ${SCHEDULER_ENABLED:true}
    # Cron expression for scheduled scans (default: 2 AM daily)
    cron: ${SCHEDULER_CRON:0 0 2 * * *}

  ai:
    # AI provider: openai, claude, custom
    provider: ${AI_PROVIDER:openai}
    # API endpoint (for custom providers)
    endpoint: ${AI_ENDPOINT:https://api.openai.com/v1/chat/completions}
    # API key
    api-key: ${AI_API_KEY:}
    # Model name
    model: ${AI_MODEL:gpt-4}
    # Enable AI identification
    enabled: ${AI_ENABLED:false}

  security:
    # TOTP issuer name (shows in authenticator app)
    totp-issuer: K2SO Watcher
    # Session timeout in minutes
    session-timeout: 30
    # Max failed login attempts before lockout
    max-login-attempts: 5
    # Lockout duration in minutes
    lockout-duration: 15

  admin:
    # Default admin username (created on first run)
    default-username: ${ADMIN_USERNAME:admin}
    # Default admin password (should be changed after first login)
    default-password: ${ADMIN_PASSWORD:admin}
